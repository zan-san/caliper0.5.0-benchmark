
version: "3"

services:
  bootnode:
    image: ethereum/client-go:alltools-v1.11.6
    container_name: bootnode
    volumes:
      - ./boot.key:/root/boot.key
    network_mode: host
    command: 
      - bootnode
      - --nodekey=root/boot.key 
      - --addr=:30305


  node1:
    image: ethereum/client-go:alltools-v1.11.6
    container_name: node1
    volumes:
      - ./node1:/root/node1
    network_mode: host
    command:
      - geth
      - --datadir=/root/node1
      - --port=8101
      - --bootnodes=enode://8b66a9dd7b86f5882ce08bfeb26f776de77e1df1e6a1e89c8d40351b2892fce090ae90308d6699b28f79ce31b83ad958f88bffdd19b97d91c39e68853552afd0@127.0.0.1:0?discport=30305
      - --networkid=123123
      - --unlock=0xe1149c36f705af5c66c6ed81680ccd7f4af26560
      - --authrpc.port=11111
      - --password=/root/node1/keystore/password

      - --ws
      - --ws.port=3334
      - --ws.api=admin,eth,miner,personal,web3 

      - --mine 
      - --miner.threads=2 
      - --miner.etherbase=0xe1149c36f705af5c66c6ed81680ccd7f4af26560
      - --miner.gasprice=1 

      - --allow-insecure-unlock 
    depends_on:
      - bootnode


  node2:
    image: ethereum/client-go:alltools-v1.11.6
    container_name: node2
    volumes:
      - ./node2:/root/node2
    network_mode: host
    command:
      - geth
      - --datadir=/root/node2
      - --port=8102
      - --bootnodes=enode://8b66a9dd7b86f5882ce08bfeb26f776de77e1df1e6a1e89c8d40351b2892fce090ae90308d6699b28f79ce31b83ad958f88bffdd19b97d91c39e68853552afd0@127.0.0.1:0?discport=30305
      - --networkid=123123
      - --unlock=0xdccc0febb789b2f7fc2a3e33d78dcfb7f55c8885
      - --authrpc.port=11112
      - --password=/root/node2/keystore/password

      - --ws
      - --ws.port=3335
      - --ws.api=admin,eth,miner,personal,web3 

      - --allow-insecure-unlock 
    depends_on:
      - bootnode
      - node1


  node3:
    image: ethereum/client-go:alltools-v1.11.6
    container_name: node3
    volumes:
      - ./node3:/root/node3
    network_mode: host
    command:
      - geth
      - --datadir=/root/node3
      - --port=8103
      - --bootnodes=enode://8b66a9dd7b86f5882ce08bfeb26f776de77e1df1e6a1e89c8d40351b2892fce090ae90308d6699b28f79ce31b83ad958f88bffdd19b97d91c39e68853552afd0@127.0.0.1:0?discport=30305
      - --networkid=123123
      - --unlock=0x4c0702845c99fbc9d6ed065e61c48e5ad3815c12
      - --authrpc.port=11113
      - --password=/root/node3/keystore/password

      - --ws
      - --ws.port=3336
      - --ws.api=admin,eth,miner,personal,web3 

      - --allow-insecure-unlock 
    depends_on:
      - bootnode
      - node2


  node4:
    image: ethereum/client-go:alltools-v1.11.6
    container_name: node4
    volumes:
      - ./node4:/root/node4
    network_mode: host
    command:
      - geth
      - --datadir=/root/node4
      - --port=8104
      - --bootnodes=enode://8b66a9dd7b86f5882ce08bfeb26f776de77e1df1e6a1e89c8d40351b2892fce090ae90308d6699b28f79ce31b83ad958f88bffdd19b97d91c39e68853552afd0@127.0.0.1:0?discport=30305
      - --networkid=123123
      - --unlock=0xc1d913170c4610224c5e058147291fed91c06c77
      - --authrpc.port=11114
      - --password=/root/node4/keystore/password

      - --ws
      - --ws.port=3337
      - --ws.api=admin,eth,miner,personal,web3 

      - --allow-insecure-unlock 
    depends_on:
      - bootnode
      - node3

